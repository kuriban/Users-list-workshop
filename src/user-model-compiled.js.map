{"version":3,"sources":["user-model.js"],"names":[],"mappings":"AAAA,OAAO,MAAM,SAAN,CAAgB;;AAEnB,SAAK,QAAL,EAAc;AACV,YAAI,SAAS,OAAO,KAAK,EAAZ,IAAmB,WAAnB,GAAiC,MAAjC,GAA0C,KAAvD;AACA,YAAI,KAAK,OAAO,KAAK,EAAZ,IAAmB,WAAnB,GAAiC,EAAjC,GAAsC,KAAK,EAApD;AACA,YAAI,OAAO,EAAI;AACP,kBAAM,KAAK,IADR;AAEH,sBAAU,KAAK,EAFZ;AAGH,mBAAO,KAAK,KAHT;AAIH,qBAAS,KAAK;AAJX,SAAX;;AAOA,oBAAY,IAAZ,EAAkB,MAAlB,EAA0B,EAA1B,EAA8B,QAA9B;AACH;;AAED,WAAO,MAAP,CAAc,EAAd,EAAiB,QAAjB,EAA0B;AACtB,oBAAY,EAAZ,EAAe,QAAf,EAAwB,EAAxB,EAA2B,QAA3B;AACH;;AAED,WAAO,OAAP,CAAe,UAAf,EAA0B,QAA1B,EAAmC;AAC/B,oBAAY,EAAZ,EAAe,KAAf,EAAqB,UAArB,EAAiC,QAAjC;AACH;;AAED,WAAO,UAAP,CAAkB,EAAlB,EAAqB,QAArB,EAA8B;AAC1B,oBAAY,EAAZ,EAAe,KAAf,EAAqB,EAArB,EAAyB,QAAzB;AACH;;AAzBkB;AA8BvB,SAAS,WAAT,CAAqB,IAArB,EAA0B,MAA1B,EAAiC,gBAAjC,EAAmD,QAAnD,EAA4D;AACxD,QAAI,MAAM,wCAAV;;AAEA,QAAG,gBAAH,EAAoB;AAChB,eAAO,MAAI,gBAAX;AACH;AACD,YAAQ,EAAR,GAAa,OAAO,IAApB,GAA2B,OAAO,KAAK,SAAL,CAAe,IAAf,CAAlC;AACA,QAAI,YAAY,IAAI,OAAJ,EAAhB,CAPwD,CAOzB;AAC/B,cAAU,MAAV,CAAiB,cAAjB,EAAiC,kBAAjC,EAAoD,gCAApD,EARwD,CAQiC;AACzF,QAAI,SAAS;AACT,gBAAQ,MADC,EACO;AAChB,iBAAS,SAFA,EAEY;AACrB,cAAM,MAHG,EAGO;AAChB,eAAO,SAJE,EAIS;AAClB,cAAM;AALG,KAAb;AAOA,QAAI,YAAY,IAAI,OAAJ,CAAY,GAAZ,EAAiB,MAAjB,CAAhB,CAhBwD,CAgBd;AAC1C,QAAI,kBAAkB,EAAtB;AACA,UAAM,SAAN,EAAmB;AAAnB,KACK,IADL,CACW,QAAD,IAAa;AACf,0BAAkB,SAAS,OAAT,CAAiB,GAAjB,CAAqB,eAArB,CAAlB;AACA,YAAG,SAAS,MAAT,IAAkB,GAAlB,IAAyB,SAAS,MAAT,GAAkB,GAA9C,EAAkD;AAC9C,gBAAG,SAAS,UAAT,IAAuB,YAA1B,EAAwC;AACpC,uBAAO,SAAS,IAAT,EAAP,CADoC,CACZ;AAC3B;AACJ,SAJD,MAIK;AACD,mBAAO,QAAQ,MAAR,EAAP;AACH;AACJ,KAVL,EAWK,IAXL,CAWW,IAAD,IAAS;AACT,iBAAS,IAAT,EAAc,eAAd;AACL,KAbL,EAaO,KAbP,CAaa,MAAI;AACb,cAAM,4BAAN;AACH,KAfD;AAgBH","file":"user-model-compiled.js","sourcesContent":["export class UserModel {\r\n\r\n    Save(callback){\r\n        var method = typeof(this.id) == \"undefined\" ? \"POST\" : \"PUT\";\r\n        var id = typeof(this.id) == \"undefined\" ? \"\" : this.id;\r\n        var data = {   /// добавляем данные к запросу\r\n                name: this.name,\r\n                password: this.pw,\r\n                email: this.email,\r\n                comment: this.comment\r\n            };\r\n\r\n        SendRequest(data, method, id, callback);\r\n    }\r\n\r\n    static Delete(id,callback){\r\n        SendRequest(\"\",\"DELETE\",id,callback);\r\n    }\r\n\r\n    static GetList(pagination,callback){\r\n        SendRequest(\"\",\"GET\",pagination, callback);\r\n    }\r\n\r\n    static GetOneUser(id,callback){\r\n        SendRequest(\"\",\"GET\",id, callback);\r\n    }\r\n\r\n\r\n\r\n}\r\nfunction SendRequest(data,method,parametr_request, callback){\r\n    var url = \"http://193.111.63.76:3000/api/v1/Users\";\r\n\r\n    if(parametr_request){\r\n        url += \"/\"+parametr_request;\r\n    }\r\n    data == \"\" ? data = null : data = JSON.stringify(data);\r\n    var myHeaders = new Headers(); // создаём объект заголовков\r\n    myHeaders.append(\"Content-Type\", \"application/json\",\"Access-Control-Allow-Origin: *\");   /// добавляем заголовок Content-Type чтоб сказать серверу в каком формате данные передаём\r\n    var myInit = {\r\n        method: method, // указываем метод запроса\r\n        headers: myHeaders,  // добавляем заголовки\r\n        mode: 'cors',   // ставим режим кросс доменных запросов\r\n        cache: 'default', // кеширование по умолчанию\r\n        body: data\r\n    };\r\n    var myRequest = new Request(url, myInit); // создаём запрос\r\n    var headersResponse = \"\";\r\n    fetch(myRequest)   //говорим запросу выполнится\r\n        .then((response)=> {\r\n            headersResponse = response.headers.get(\"X-Total-Count\");\r\n            if(response.status >=200 && response.status < 300){\r\n                if(response.statusText != \"No Content\") {\r\n                    return response.json(); /// парсим ответ от сервера в json\r\n                }\r\n            }else{\r\n                return Promise.reject();\r\n            }\r\n        })\r\n        .then((json)=> {\r\n              callback(json,headersResponse);\r\n        }).catch(()=>{\r\n        alert(\"Упс!!! Что-то пошло не так\");\r\n    });\r\n}\r\n\r\n\r\n"]}